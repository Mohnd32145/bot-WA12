import fs from 'fs';

const jokes = [
  "ليه المصري بياخد شمعة معاه للحمام؟ عشان يعدّ الـ 'ليالي'!",
  "إزاى بتعرف إن المصري عنده ولاد؟ بيقولك: 'أنا عندي ٣.. ٢ ولاد وبنت'!",
  "مين أقوى حد في مصر؟ 'الست الحنونة'.. عشان حتى أبوها بيخاف منها!",
  "قالوا للراجل المصري: إنت بتعمل إيه لما تغضب؟ قالهم: 'أصلي.. وأشرب مية.. وأروح أنام'.. قالوله: طب وإنت مش بتحل المشكلة؟ قال: 'لا.. بس بخلّيها تفضل مشكلتهم'!",
  "المدرس سأل الطالب المصري: إزاى تقول 'تفاحة' بالإنجليزي؟ قاله: 'أبل'.. قاله: أحسنت! طب 'موز'؟ قاله: 'بنانا'.. قاله: ممتاز! طب 'بصل'؟ قاله: 'يا أستاذ.. أنا مش جزار!'",
  "المصري لما يتأخر على الشغل بيقول للمدير: 'آسف يا أفندم.. بس الفجر إتأخر النهاردة!'",
  "قالوا لمصري: إنت بتشتغل إيه؟ قالهم: 'مهندس'.. قالوله: طب إنت متخرج منين؟ قال: 'من التعب!'",
  "المصري لما ييجي يتقدم للبنت بيقول لأبوها: 'يا أفندم.. أنا عندي شقة.. وعربية.. ومرتب كويس'.. أبو البنت: 'تمام.. بس إنت عايز إيه؟'",
  "المصري بيحب يقول: 'ربنا يوفقك'.. لكن لو شافك ناجح بيقول: 'دي حظوظ سودا!'",
  "المصري لما يلاقي حد غني بيقول: 'ربنا يزيده'.. لكن في نفسه بيقول: 'وياخده منين يا عم؟!'"
];

// حفظ النكات التي تم عرضها لتجنب التكرار
let usedJokes = [...jokes];

const handler = async (m) => {
  if (usedJokes.length === 0) {
    usedJokes = [...jokes]; // إعادة تعبئة النكات إذا نفدت
    m.reply("خلصت النكت.. هبدأ من جديد! 😂\n\n" + usedJokes.pop());
  } else {
    const randomIndex = Math.floor(Math.random() * usedJokes.length);
    const selectedJoke = usedJokes.splice(randomIndex, 1)[0];
    m.reply(selectedJoke);
  }
};

handler.help = ['نكتة', 'نكته'].map((v) => v + ' (لإظهار نكتة مصرية مضحكة)');
handler.tags = ['fun'];
handler.command = ['نكتة', 'نكته', 'نكت'];

export default handler;