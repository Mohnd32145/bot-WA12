let game = global.quiz_game || (global.quiz_game = {});

let botSignature = `

โฐโโโโโโโโโโโโโโโโโโโโโฏ

`;

let questions = [

    { question: "ูุง ูู ุฃูุจุฑ ูููุจ ูู ุงููุฌููุนุฉ ุงูุดูุณูุฉุ", answer: "ุงููุดุชุฑู" },

    { question: "ูุง ูู ุงูุนูุตุฑ ุงูููููุงุฆู ุงูุฐู ูุฑูุฒ ูู ุจู Oุ", answer: "ุงูุฃูุณุฌูู" },

    { question: "ูู ุนุฏุฏ ูุงุฑุงุช ุงูุนุงููุ", answer: "ุณุจุนุฉ" },

    { question: "ูุง ูู ููู ุงูุณูุงุก ุงูุตุงููุฉุ", answer: "ุฃุฒุฑู" },

    { question: "ูุง ุงูุญููุงู ุงูุฐู ูุทูู ุนููู ููุจ ููู ุงูุบุงุจุฉุ", answer: "ุงูุฃุณุฏ" },

    { question: "ูู ูู ูุฎุชุฑุน ุงููุตุจุงุญ ุงูููุฑุจุงุฆูุ", answer: "ุชููุงุณ ุฅุฏูุณูู" },

    { question: "ูุง ูู ุนุงุตูุฉ ููุฏุงุ", answer: "ุฃูุชุงูุง" },

    { question: "ูุง ูู ุฃูุจุฑ ูุญูุท ูู ุงูุนุงููุ", answer: "ุงููุญูุท ุงููุงุฏุฆ" },

    { question: "ูู ุนุฏุฏ ุงูุนุธุงู ูู ุฌุณู ุงูุฅูุณุงู ุงูุจุงูุบุ", answer: "206" },

    { question: "ูู ูู ุฃูู ุดุฎุต ุตุนุฏ ุฅูู ุงููุถุงุกุ", answer: "ููุฑู ุฌุงุฌุงุฑูู" }

];

let handler = async (m, { conn }) => {

    if (game[m.chat]) {

        return m.reply("โ๏ธ ููุงู ูุณุงุจูุฉ ุฌุงุฑูุฉ ุจุงููุนู! ุญุงูู ุงูุฅุฌุงุจุฉ ุฃูููุง.");

    }

    let randomQuestion = questions[Math.floor(Math.random() * questions.length)];

    game[m.chat] = {

        question: randomQuestion.question,

        answer: randomQuestion.answer.toLowerCase(),

        timeout: setTimeout(() => {

            if (game[m.chat]) {

                m.reply(`

โฆโโโโฆ๐ฑโฆโโโโฆ

โ ููุงุนูููููุฉ โฆ ูุณุงุจูุฉ ุงููุนูููุงุช โฆโฏ

โโคโคโคโคเผปโกเผบโคโคโคโคโ 
โ ุงูุชูุช ุงููุณุงุจูุฉ! โโ 
โโคโคโคโคเผปโกเผบโคโคโคโคโ

๐ข ูู ูุชููู ุฃุญุฏ ูู ุงูุฅุฌุงุจุฉ ูู ุงูููุช ุงููุญุฏุฏ.

๐ก ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุงูุช: ${randomQuestion.answer}

๐ ุญุธูุง ุฃููุฑ ูู ุงูุฌููุฉ ุงููุงุฏูุฉ!

` + botSignature);

                delete game[m.chat];

            }

        }, 30000) // 30 ุซุงููุฉ

    };

    m.reply(`

โฆโโโโฆ๐ฑโฆโโโโฆ

โ ููุงุนูููููุฉ โฆ ูุณุงุจูุฉ ุงููุนูููุงุช โฆโฏ

โโคโคโคโคเผปโกเผบโคโคโคโคโ 
โ ุงุณุชุนุฏูุง ููุชุญุฏู ูุงูุญูุงุณ! ๐โ 
โโคโคโคโคเผปโกเผบโคโคโคโคโ

โฆโงโโโโโโโโโโงโฆ

โพ โธ๐ฐ๏ธโธโ ุงูููุช โฆ ใ 30 ุซุงููุฉ ใ

โพ โธ๐คโธโ ููุฏู ุงููุนุงููุฉ โฆ ใ ูุงููู ใ

โพ โธ๐๏ธโธโ ูุทูุฑ ุงูุจูุช โฆ ใ ุฅูุฒุงูุง ใ

โพ โธ๐โธโ ุงูุฌุงุฆุฒุฉ โฆ ใ 500 ููุทุฉ ใ

โฆโงโโโโโโโโโโงโฆ

๐ข ุดุฑุญ ุงููุนุงููุฉ:

๐ฅ ุงูุณุคุงู ุงููุทุฑูุญ: ูู ุจุงูุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู ุงููุทุฑูุญ ูุจู ุงูุชูุงุก ุงูููุช!

โก ุฃูู ุดุฎุต ูุฌูุจ ุฅุฌุงุจุฉ ุตุญูุญุฉ ูุญุตู ุนูู ููุงุท!

๐ ุงููุงุฆุฒ ูู ูู ูุฌูุน ุฃูุจุฑ ุนุฏุฏ ูู ุงูููุงุท ูู ููุงูุฉ ุงููุนุงููุฉ!

๐ ุฌุงูุฒูู ููููุฒุ ูุง ุชููุชูุง ุงููุฑุตุฉ!

โ ุงูุณุคุงู: ${randomQuestion.question}

โฆโโโโฆ๐ฑโฆโโโโฆ

` + botSignature);

};

// ูุญุต ุงูุฅุฌุงุจุฉ

handler.before = async function (m, { conn }) {

    let chat = game[m.chat];

    if (chat && chat.answer) {

        let userAnswer = (m.text || "").trim().toLowerCase();

        if (!userAnswer) return;

        if (userAnswer === chat.answer) {

            let winner = m.sender;

            let mentionText = `

โฆโโโโฆ๐ฑโฆโโโโฆ

โ ููุงุนูููููุฉ โฆ ูุณุงุจูุฉ ุงููุนูููุงุช โฆโฏ

โโคโคโคโคเผปโกเผบโคโคโคโคโ 
โ ุงูุชูุช ุงููุณุงุจูุฉ! ๐โ 
โโคโคโคโคเผปโกเผบโคโคโคโคโ

โฆโงโโโโโโโโโโงโฆ

๐ ุงูุฑุงุจุญ: @${winner.split('@')[0]} โ

๐ ุญุตู ุนูู 500 XP!

๐ก ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูุงูุช: ${chat.answer}

๐ฅ ุฃุญุณูุช! ุงุณุชูุฑ ูู ุงูุชุญุฏูุงุช ุงููุงุฏูุฉ!

` + botSignature;

            conn.reply(m.chat, mentionText, m, { mentions: [winner] });

            clearTimeout(chat.timeout);

            delete game[m.chat];

        }

    }

};

// ุชุญุฏูุฏ ุงูุฃูุงูุฑ

handler.help = ['ูุณุงุจูุฉ'];

handler.tags = ['game'];

handler.command = ['ูุณุงุจูุฉ'];

export default handler;