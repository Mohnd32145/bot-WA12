let botSignature = `> âœ¦â”‡ðŒðˆðŠð„ð˜ |â™•| ððŽð“â”‡âœ¦`;

let game = global.guessCharacterGame || (global.guessCharacterGame = {});

const handler = async (m, { conn }) => {

    if (game[m.chat]) {

        return conn.reply(m.chat, 

`âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§
âš ï¸â”‡ Ù„Ù€Ø¯ÙŠÙ€Ùƒ Ø¬Ù€ÙˆÙ„Ù€Ø© Ù†Ù€Ø§Ø´Ù€Ø·Ù€Ø©!

â†³ Ø§Ù„Ù€Ø±Ø¬Ù€Ø§Ø¡ Ø§Ù„Ù€ØªÙ€Ø®Ù€Ù…Ù€ÙŠÙ€Ù† Ø£ÙˆÙ„Ø§Ù‹
âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§

${botSignature}`, m);

    }

    const characters = [

        // Ø´Ø®ØµÙŠØ§Øª ÙˆÙ† Ø¨ÙŠØ³

        { description: "Ù‚Ø±ØµØ§Ù† Ø´Ø§Ø¨ ÙŠØ±ØªØ¯ÙŠ Ù‚Ø¨Ø¹Ø© Ù‚Ø´ÙŠØ© ÙˆÙŠØ­Ù„Ù… Ø¨Ø£Ù† ÙŠØµØ¨Ø­ Ù…Ù„Ùƒ Ø§Ù„Ù‚Ø±Ø§ØµÙ†Ø©.", name: "Ù„ÙˆÙÙŠ", options: ["Ù„ÙˆÙÙŠ", "ÙƒÙŠØ¯", "Ù„Ø§Ùˆ", "Ø±ÙˆØ¬Ø±"] },

        { description: "Ø³ÙŠØ§Ù Ù‚ÙˆÙŠ ÙŠØ³ØªØ®Ø¯Ù… Ø«Ù„Ø§Ø«Ø© Ø³ÙŠÙˆÙ ÙˆÙŠØ·Ù…Ø­ Ù„Ø£Ù† ÙŠÙƒÙˆÙ† Ø£Ù‚ÙˆÙ‰ Ù…Ø¨Ø§Ø±Ø² ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù….", name: "Ø²ÙˆØ±Ùˆ", options: ["Ø²ÙˆØ±Ùˆ", "Ù…ÙŠÙ‡ÙˆÙƒ", "ÙƒÙˆØ¬ÙŠ", "ØªØ§Ø´ÙŠØºÙŠ"] },

        { description: "Ø·Ø§Ù‡ÙŠ Ù…ØªØ­Ù…Ø³ ÙŠØ­Ù„Ù… Ø¨Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø²ÙÙŠØ± ÙˆÙŠØ³ØªØ®Ø¯Ù… Ø£Ø±Ø¬Ù„ Ù‚ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ù‚ØªØ§Ù„.", name: "Ø³Ø§Ù†Ø¬ÙŠ", options: ["Ø³Ø§Ù†Ø¬ÙŠ", "Ø²ÙŠÙ", "ÙƒØ±ÙŠÙ…Ø©", "Ø¨ÙŠØ¯Ù„"] },

        

        // Ø´Ø®ØµÙŠØ§Øª Ù†Ø§Ø±ÙˆØªÙˆ

        { description: "Ù†ÙŠÙ†Ø¬Ø§ Ù…Ù† Ù‚Ø±ÙŠØ© ÙƒÙˆÙ†ÙˆÙ‡Ø§ØŒ ÙŠØ³Ø¹Ù‰ Ù„ÙŠØµØ¨Ø­ Ø§Ù„Ù‡ÙˆÙƒØ§Ø¬ÙŠ ÙˆÙŠØ­Ù…Ù„ ÙˆØ­Ø´ Ø§Ù„ÙƒÙŠÙˆØ¨ÙŠ Ø¯Ø§Ø®Ù„Ù‡.", name: "Ù†Ø§Ø±ÙˆØªÙˆ", options: ["Ù†Ø§Ø±ÙˆØªÙˆ", "Ù…ÙŠÙ†Ø§ØªÙˆ", "ÙƒØ§Ø´ÙŠÙ†", "Ù‡ÙŠØ±ÙˆØ²Ù†"] },

        { description: "Ù†ÙŠÙ†Ø¬Ø§ Ø£Ù†ÙŠÙ‚ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø´Ø§Ø±ÙŠÙ†ØºØ§Ù† ÙˆÙŠØ³Ø¹Ù‰ Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù… Ù…Ù† Ø£Ø®ÙŠÙ‡.", name: "Ø³Ø§Ø³ÙƒÙŠ", options: ["Ø³Ø§Ø³ÙƒÙŠ", "Ø§ÙŠØªØ§ØªØ´ÙŠ", "Ù…Ø§Ø¯Ø§Ø±Ø§", "Ø£ÙˆØ¨ÙŠØªÙˆ"] },

        { description: "Ù†ÙŠÙ†Ø¬Ø§ ÙŠØºØ·ÙŠ Ø¹ÙŠÙ†ÙŠÙ‡ ÙˆÙŠÙ‚Ø±Ø£ Ø±ÙˆØ§ÙŠØ§Øª Ø¬ÙŠØ±Ø§ÙŠØ§.", name: "ÙƒØ§ÙƒØ§Ø´ÙŠ", options: ["ÙƒØ§ÙƒØ§Ø´ÙŠ", "Ø¬ÙŠØ±Ø§ÙŠØ§", "Ø§ÙˆØ±ÙˆØªØ´ÙŠÙ…Ø§Ø±Ùˆ", "ØªÙˆØ¨ÙŠ"] },

        

        // Ø´Ø®ØµÙŠØ§Øª Ø£ØªØ§Ùƒ Ø£ÙˆÙ† ØªÙŠØªØ§Ù†

        { description: "Ù…Ø­Ø§Ø±Ø¨ Ù‚ØµÙŠØ± Ø§Ù„Ù‚Ø§Ù…Ø© Ù…Ù† ÙÙŠÙ„Ù‚ Ø§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹ØŒ ÙŠØ¹ØªØ¨Ø± Ù…Ù† Ø£Ù‚ÙˆÙ‰ Ø§Ù„Ø¬Ù†ÙˆØ¯.", name: "Ù„ÙŠÙØ§ÙŠ", options: ["Ù„ÙŠÙØ§ÙŠ", "Ø¥ÙŠØ±ÙŠÙ†", "Ø§Ø±Ù…ÙŠÙ†", "Ø¬Ø§Ù†"] },

        { description: "ÙØªØ§Ø© Ù…Ù† Ø¹Ø§Ø¦Ù„Ø© Ø£ÙƒÙŠØ±Ù…Ø§Ù†ØŒ ØªØ­Ù…ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ ØªØ­Ø¨Ù‡.", name: "Ù…ÙŠÙƒØ§Ø³Ø§", options: ["Ù…ÙŠÙƒØ§Ø³Ø§", "Ù‡ÙŠØ³ØªÙˆØ±ÙŠØ§", "Ø¨ÙŠÙƒ", "ÙŠÙŠÙ…ÙŠØ±"] },

        

        // Ø´Ø®ØµÙŠØ§Øª Ø¬ÙˆØ¬ÙˆØªØ³Ùˆ ÙƒØ§ÙŠØ³Ù†

        { description: "Ø³Ø§Ø­Ø± Ù‚ÙˆÙŠ Ø°Ùˆ Ø´Ø¹Ø± Ø£Ø¨ÙŠØ¶ ÙŠØºØ·ÙŠ Ø¹ÙŠÙ†ÙŠÙ‡ØŒ ÙŠØ¹ØªØ¨Ø± Ø§Ù„Ø£Ù‚ÙˆÙ‰ ÙÙŠ Ø¹ØµØ±Ù‡.", name: "ØºÙˆØ¬Ùˆ", options: ["ØºÙˆØ¬Ùˆ", "Ø¬ÙŠØªÙˆ", "ÙŠÙˆØ¬ÙŠ", "Ù…ÙŠÙƒÙŠ"] },

        { description: "Ø·Ø§Ù„Ø¨ ÙŠÙ…ØªÙ„Ùƒ Ù„Ø¹Ù†Ø© Ø³ÙˆÙƒÙˆÙ†Ø§ Ø¨Ø¯Ø§Ø®Ù„Ù‡.", name: "Ø§ÙŠØªØ§Ø¯ÙˆØ±ÙŠ", options: ["Ø§ÙŠØªØ§Ø¯ÙˆØ±ÙŠ", "Ù…Ø§Ù‡ÙŠØªÙˆ", "Ù†Ø§Ù†Ø§Ù…ÙŠ", "ØªÙˆØ¯Ùˆ"] },

        

        // Ø´Ø®ØµÙŠØ§Øª Ù‡Ø§Ù†ØªØ± x Ù‡Ø§Ù†ØªØ±

        { description: "ØµÙŠØ§Ø¯ Ù…ØªÙ‡ÙˆØ± ÙŠØ¨Ø­Ø« Ø¹Ù† ÙˆØ§Ù„Ø¯Ù‡ØŒ ÙŠÙ…ØªÙ„Ùƒ Ù‚Ø¯Ø±Ø© Ø§Ù„Ù†ÙŠÙ†.", name: "ØºÙˆÙ†", options: ["ØºÙˆÙ†", "ÙƒØ§ÙŠØªÙˆ", "Ø¬ÙŠÙ†", "Ø¨ÙŠØ³Ùƒ"] },

        { description: "ÙØªÙ‰ Ù‚Ø§ØªÙ„ Ù…Ù† Ø¹Ø§Ø¦Ù„Ø© Ø²ÙˆÙ„Ø¯ÙŠÙƒØŒ ÙŠÙ…ØªÙ„Ùƒ Ù…Ø®Ø§Ù„Ø¨ Ø­Ø§Ø¯Ø©.", name: "ÙƒÙŠÙ„ÙˆØ§", options: ["ÙƒÙŠÙ„ÙˆØ§", "Ø§ÙŠÙ„ÙˆÙ…ÙŠ", "ÙƒÙˆØ±ÙˆØªØ§", "Ø³ÙŠÙ„ÙØ§"] }

    ];

    let randomCharacter = characters[Math.floor(Math.random() * characters.length)];

    

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¥Ù† Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©

    if (!randomCharacter.options.includes(randomCharacter.name)) {

        randomCharacter.options[0] = randomCharacter.name;

    }

    

    // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹

    let shuffledOptions = [...randomCharacter.options].sort(() => Math.random() - 0.5);

    

    let optionsText = shuffledOptions.map((opt, index) => `â–¸ ${index + 1}. â${opt}âž`).join('\n');

    game[m.chat] = {

        description: randomCharacter.description,

        name: randomCharacter.name,

        options: shuffledOptions,

        timeout: setTimeout(() => {

            if (game[m.chat]) {

                conn.reply(m.chat, 

`âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§
ã€ŽâŒ›ã€ Ø§Ù†Ù€ØªÙ€Ù‡Ù€Ù‰ Ø§Ù„Ù€ÙˆÙ‚Ù€Øª!

ã€Žâœ…ã€ Ø§Ù„Ø¥Ø¬Ù€Ø§Ø¨Ù€Ø© Ø§Ù„Ù€ØµÙ€Ø­Ù€ÙŠÙ€Ø­Ù€Ø©:

â†³ â${randomCharacter.name}âž
âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§

${botSignature}`, m);

                delete game[m.chat];

            }

        }, 60000)

    };

    await conn.reply(m.chat, 

`âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§
ã€ŽðŸ§©ã€ Ù…Ù€Ù† Ù‡Ù€ÙŠ Ø§Ù„Ù€Ø´Ù€Ø®Ù€ØµÙ€ÙŠÙ€Ø© Ø§Ù„Ù€ØªÙ€ÙŠ ØªÙ€ØªÙ€ÙˆØ§ÙÙ€Ù‚ Ù…Ù€Ø¹ Ù‡Ù€Ø°Ø§ Ø§Ù„Ù€ÙˆØµÙ€ÙØŸ

ã€Žâ³ã€ Ø§Ù„Ù€ÙˆÙ‚Ù€Øª Ø§Ù„Ù€Ù…Ù€ØªÙ€Ø§Ø­: 60 Ø«Ù€Ø§Ù†Ù€ÙŠÙ€Ø©

ã€ŽðŸ†ã€ Ø¬Ù€Ø§Ø¦Ù€Ø²Ø© Ø§Ù„Ù€ÙÙ€ÙˆØ²: 500 XP
âœ§â•â”â”…â”‰ã€ŠðŸŒºã€‹â”…â”‰â”â•âœ§
ã€ŽðŸ“ã€ Ø§Ù„Ù€ÙˆØµÙ€Ù:

â†³ â${randomCharacter.description}âž

ã€ŽðŸ“œã€ Ø§Ø®Ù€ØªÙ€Ø± Ø§Ù„Ø¥Ø¬Ù€Ø§Ø¨Ù€Ø© Ø§Ù„Ù€ØµÙ€Ø­Ù€ÙŠÙ€Ø­Ù€Ø©:

${optionsText}
âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§

${botSignature}`, m);

};

handler.before = async (m, { conn }) => {

    if (!game[m.chat]) return;

    

    const chat = game[m.chat];

    

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©

    const selectedOption = parseInt(m.text.trim());

    if (selectedOption >= 1 && selectedOption <= 4) {

        const selectedAnswer = chat.options[selectedOption - 1];

        

        if (selectedAnswer === chat.name) {

            clearTimeout(chat.timeout);

            await conn.reply(m.chat, 

`âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§
ã€ŽðŸŽ‰ã€ Ù…Ù€Ø¨Ù€à¢ªÙˆÙƒ Ù„Ù€Ù‚Ù€Ø¯ ÙÙ€Ø²Øª!

ã€Žâœ¨ã€ Ø§Ù„Ù€Ø´Ù€Ø®Ù€ØµÙ€ÙŠÙ€Ø© Ù‡Ù€ÙŠ:

â†³ â${chat.name}âž

ã€ŽðŸ…ã€ Ø¬Ù€Ù…Ù€Ø¹Ù€Øª: 500 XP
âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§

${botSignature}`, m, { mentions: [m.sender] });

            delete game[m.chat];

        } else {

            await conn.reply(m.chat, 

`âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§
ã€ŽâŒã€ Ø¥Ø¬Ù€Ø§Ø¨Ù€Ø© Ø®Ù€Ø§Ø·Ù€Ø¦Ù€Ø©!

â†³ Ø­Ù€Ø§ÙˆÙ„ Ù…Ù€Ø¬Ù€Ø¯Ø¯Ø§Ù‹
âœ§â•â”â”…â”‰ã€Šâœ ã€‹â”…â”‰â”â•âœ§

${botSignature}`, m);

        }

    }

};

handler.help = ['Ø®Ù…Ù†'];

handler.tags = ['games'];

handler.command = /^Ø®Ù…Ù†1$/i;

export default handler;